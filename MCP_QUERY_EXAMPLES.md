# MCP SQLite Query Examples for Trading Bot

## Available Tables
- **signals** - Trading signals generated by the bot
- **trades** - Executed trades and outcomes  
- **market_data** - OHLCV price data
- **performance** - Daily performance metrics

## Example Queries (Use these in Claude Code prompts once MCP is active)

### Trading Signals Analysis
```sql
-- Recent signals
SELECT * FROM signals ORDER BY timestamp DESC LIMIT 10;

-- Strong buy/sell signals
SELECT symbol, price, signal, strength, reasons 
FROM signals 
WHERE strength >= 80 
ORDER BY timestamp DESC;

-- Unexecuted signals
SELECT * FROM signals WHERE executed = 0;
```

### Trade Performance
```sql
-- Recent trades with PnL
SELECT symbol, side, quantity, entry_price, exit_price, pnl, pnl_percentage 
FROM trades 
WHERE status = 'CLOSED' 
ORDER BY timestamp DESC LIMIT 20;

-- Winning trades
SELECT * FROM trades WHERE pnl > 0 AND status = 'CLOSED';

-- Trade summary by symbol
SELECT symbol, COUNT(*) as total_trades, 
       AVG(pnl) as avg_pnl, 
       SUM(pnl) as total_pnl
FROM trades 
WHERE status = 'CLOSED' 
GROUP BY symbol;
```

### Market Data Analysis
```sql
-- Recent price data
SELECT * FROM market_data ORDER BY timestamp DESC LIMIT 50;

-- Daily highs and lows
SELECT DATE(timestamp) as date, 
       symbol,
       MAX(high_price) as daily_high, 
       MIN(low_price) as daily_low
FROM market_data 
GROUP BY DATE(timestamp), symbol;

-- Volume analysis
SELECT symbol, AVG(volume) as avg_volume, MAX(volume) as max_volume
FROM market_data 
GROUP BY symbol;
```

### Performance Metrics
```sql
-- Overall performance
SELECT * FROM performance ORDER BY date DESC;

-- Best performing days
SELECT date, symbol, total_pnl, win_rate 
FROM performance 
WHERE total_pnl > 0 
ORDER BY total_pnl DESC;

-- Win rate analysis
SELECT symbol, AVG(win_rate) as avg_win_rate, AVG(total_pnl) as avg_pnl
FROM performance 
GROUP BY symbol;
```

## How to Use in Claude Code Prompts

Once MCP is active, use natural language queries like:

1. **"Show me the last 10 trading signals"**
2. **"What's the total PnL for each symbol this month?"**
3. **"Find all trades with more than 5% profit"**
4. **"Get the daily performance summary for the last week"**
5. **"Show me the highest volume trading days"**

## Direct SQL Queries
You can also specify exact SQL:
**"Run this query on the trades table: SELECT symbol, AVG(pnl_percentage) FROM trades WHERE status='CLOSED' GROUP BY symbol"**